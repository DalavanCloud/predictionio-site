<!DOCTYPE html><html><head><title>Frequently Asked Questions</title><meta charset="utf-8"/><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta class="swiftype" name="title" data-type="string" content="Frequently Asked Questions"/><link rel="canonical" href="https://predictionio.apache.org/resources/faq/"/><link href="/images/favicon/normal-b330020a.png" rel="shortcut icon"/><link href="/images/favicon/apple-c0febcf2.png" rel="apple-touch-icon"/><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet"/><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"/><link href="/stylesheets/application-eccfc6cb.css" rel="stylesheet" type="text/css"/><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script><script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="//use.typekit.net/pqo0itb.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script></head><body><div id="global"><header><div class="container" id="header-wrapper"><div class="row"><div class="col-sm-12"><div id="logo-wrapper"><span id="drawer-toggle"></span><a href="#"></a><a href="http://predictionio.apache.org/"><img alt="Apache PredictionIO" id="logo" src="/images/logos/logo-ee2b9bb3.png"/></a><span>速</span></div><div id="menu-wrapper"><div id="pill-wrapper"><a class="pill left" href="/gallery/template-gallery">TEMPLATES</a> <a class="pill right" href="//github.com/apache/predictionio/">OPEN SOURCE</a></div></div><img class="mobile-search-bar-toggler hidden-md hidden-lg" src="/images/icons/search-glass-704bd4ff.png"/></div></div></div></header><div id="search-bar-row-wrapper"><div class="container-fluid" id="search-bar-row"><div class="row"><div class="col-md-9 col-sm-11 col-xs-11"><div class="hidden-md hidden-lg" id="mobile-page-heading-wrapper"><p>PredictionIO Docs</p><h4>FAQs</h4></div><h4 class="hidden-sm hidden-xs">PredictionIO Docs</h4></div><div class="col-md-3 col-sm-1 col-xs-1 hidden-md hidden-lg"><img id="left-menu-indicator" src="/images/icons/down-arrow-dfe9f7fe.png"/></div><div class="col-md-3 col-sm-12 col-xs-12 swiftype-wrapper"><div class="swiftype"><form class="search-form"><img class="search-box-toggler hidden-xs hidden-sm" src="/images/icons/search-glass-704bd4ff.png"/><div class="search-box"><img src="/images/icons/search-glass-704bd4ff.png"/><input type="text" id="st-search-input" class="st-search-input" placeholder="Search Doc..."/></div><img class="swiftype-row-hider hidden-md hidden-lg" src="/images/icons/drawer-toggle-active-fcbef12a.png"/></form></div></div><div class="mobile-left-menu-toggler hidden-md hidden-lg"></div></div></div></div><div id="page" class="container-fluid"><div class="row"><div id="left-menu-wrapper" class="col-md-3"><nav id="nav-main"><ul><li class="level-1"><a class="expandible" href="/"><span>Apache PredictionIO速 Documentation</span></a><ul><li class="level-2"><a class="final" href="/"><span>Welcome to Apache PredictionIO速</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Getting Started</span></a><ul><li class="level-2"><a class="final" href="/start/"><span>A Quick Intro</span></a></li><li class="level-2"><a class="final" href="/install/"><span>Installing Apache PredictionIO</span></a></li><li class="level-2"><a class="final" href="/start/download/"><span>Downloading an Engine Template</span></a></li><li class="level-2"><a class="final" href="/start/deploy/"><span>Deploying Your First Engine</span></a></li><li class="level-2"><a class="final" href="/start/customize/"><span>Customizing the Engine</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Integrating with Your App</span></a><ul><li class="level-2"><a class="final" href="/appintegration/"><span>App Integration Overview</span></a></li><li class="level-2"><a class="expandible" href="/sdk/"><span>List of SDKs</span></a><ul><li class="level-3"><a class="final" href="/sdk/java/"><span>Java & Android SDK</span></a></li><li class="level-3"><a class="final" href="/sdk/php/"><span>PHP SDK</span></a></li><li class="level-3"><a class="final" href="/sdk/python/"><span>Python SDK</span></a></li><li class="level-3"><a class="final" href="/sdk/ruby/"><span>Ruby SDK</span></a></li><li class="level-3"><a class="final" href="/sdk/community/"><span>Community Powered SDKs</span></a></li></ul></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Deploying an Engine</span></a><ul><li class="level-2"><a class="final" href="/deploy/"><span>Deploying as a Web Service</span></a></li><li class="level-2"><a class="final" href="/batchpredict/"><span>Batch Predictions</span></a></li><li class="level-2"><a class="final" href="/deploy/monitoring/"><span>Monitoring Engine</span></a></li><li class="level-2"><a class="final" href="/deploy/engineparams/"><span>Setting Engine Parameters</span></a></li><li class="level-2"><a class="final" href="/deploy/enginevariants/"><span>Deploying Multiple Engine Variants</span></a></li><li class="level-2"><a class="final" href="/deploy/plugin/"><span>Engine Server Plugin</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Customizing an Engine</span></a><ul><li class="level-2"><a class="final" href="/customize/"><span>Learning DASE</span></a></li><li class="level-2"><a class="final" href="/customize/dase/"><span>Implement DASE</span></a></li><li class="level-2"><a class="final" href="/customize/troubleshooting/"><span>Troubleshooting Engine Development</span></a></li><li class="level-2"><a class="final" href="/api/current/#package"><span>Engine Scala APIs</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Collecting and Analyzing Data</span></a><ul><li class="level-2"><a class="final" href="/datacollection/"><span>Event Server Overview</span></a></li><li class="level-2"><a class="final" href="/datacollection/eventapi/"><span>Collecting Data with REST/SDKs</span></a></li><li class="level-2"><a class="final" href="/datacollection/eventmodel/"><span>Events Modeling</span></a></li><li class="level-2"><a class="final" href="/datacollection/webhooks/"><span>Unifying Multichannel Data with Webhooks</span></a></li><li class="level-2"><a class="final" href="/datacollection/channel/"><span>Channel</span></a></li><li class="level-2"><a class="final" href="/datacollection/batchimport/"><span>Importing Data in Batch</span></a></li><li class="level-2"><a class="final" href="/datacollection/analytics/"><span>Using Analytics Tools</span></a></li><li class="level-2"><a class="final" href="/datacollection/plugin/"><span>Event Server Plugin</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Choosing an Algorithm</span></a><ul><li class="level-2"><a class="final" href="/algorithm/"><span>Built-in Algorithm Libraries</span></a></li><li class="level-2"><a class="final" href="/algorithm/switch/"><span>Switching to Another Algorithm</span></a></li><li class="level-2"><a class="final" href="/algorithm/multiple/"><span>Combining Multiple Algorithms</span></a></li><li class="level-2"><a class="final" href="/algorithm/custom/"><span>Adding Your Own Algorithms</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Tuning and Evaluation</span></a><ul><li class="level-2"><a class="final" href="/evaluation/"><span>Overview</span></a></li><li class="level-2"><a class="final" href="/evaluation/paramtuning/"><span>Hyperparameter Tuning</span></a></li><li class="level-2"><a class="final" href="/evaluation/evaluationdashboard/"><span>Evaluation Dashboard</span></a></li><li class="level-2"><a class="final" href="/evaluation/metricchoose/"><span>Choosing Evaluation Metrics</span></a></li><li class="level-2"><a class="final" href="/evaluation/metricbuild/"><span>Building Evaluation Metrics</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>System Architecture</span></a><ul><li class="level-2"><a class="final" href="/system/"><span>Architecture Overview</span></a></li><li class="level-2"><a class="final" href="/system/anotherdatastore/"><span>Using Another Data Store</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>PredictionIO速 Official Templates</span></a><ul><li class="level-2"><a class="final" href="/templates/"><span>Intro</span></a></li><li class="level-2"><a class="expandible" href="#"><span>Recommendation</span></a><ul><li class="level-3"><a class="final" href="/templates/recommendation/quickstart/"><span>Quick Start</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/dase/"><span>DASE</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/evaluation/"><span>Evaluation Explained</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/how-to/"><span>How-To</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/reading-custom-events/"><span>Read Custom Events</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/customize-data-prep/"><span>Customize Data Preparator</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/customize-serving/"><span>Customize Serving</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/training-with-implicit-preference/"><span>Train with Implicit Preference</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/blacklist-items/"><span>Filter Recommended Items by Blacklist in Query</span></a></li><li class="level-3"><a class="final" href="/templates/recommendation/batch-evaluator/"><span>Batch Persistable Evaluator</span></a></li></ul></li><li class="level-2"><a class="expandible" href="#"><span>E-Commerce Recommendation</span></a><ul><li class="level-3"><a class="final" href="/templates/ecommercerecommendation/quickstart/"><span>Quick Start</span></a></li><li class="level-3"><a class="final" href="/templates/ecommercerecommendation/dase/"><span>DASE</span></a></li><li class="level-3"><a class="final" href="/templates/ecommercerecommendation/how-to/"><span>How-To</span></a></li><li class="level-3"><a class="final" href="/templates/ecommercerecommendation/train-with-rate-event/"><span>Train with Rate Event</span></a></li><li class="level-3"><a class="final" href="/templates/ecommercerecommendation/adjust-score/"><span>Adjust Score</span></a></li></ul></li><li class="level-2"><a class="expandible" href="#"><span>Similar Product</span></a><ul><li class="level-3"><a class="final" href="/templates/similarproduct/quickstart/"><span>Quick Start</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/dase/"><span>DASE</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/how-to/"><span>How-To</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/multi-events-multi-algos/"><span>Multiple Events and Multiple Algorithms</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/return-item-properties/"><span>Returns Item Properties</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/train-with-rate-event/"><span>Train with Rate Event</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/rid-user-set-event/"><span>Get Rid of Events for Users</span></a></li><li class="level-3"><a class="final" href="/templates/similarproduct/recommended-user/"><span>Recommend Users</span></a></li></ul></li><li class="level-2"><a class="expandible" href="#"><span>Classification</span></a><ul><li class="level-3"><a class="final" href="/templates/classification/quickstart/"><span>Quick Start</span></a></li><li class="level-3"><a class="final" href="/templates/classification/dase/"><span>DASE</span></a></li><li class="level-3"><a class="final" href="/templates/classification/how-to/"><span>How-To</span></a></li><li class="level-3"><a class="final" href="/templates/classification/add-algorithm/"><span>Use Alternative Algorithm</span></a></li><li class="level-3"><a class="final" href="/templates/classification/reading-custom-properties/"><span>Read Custom Properties</span></a></li></ul></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Engine Template Gallery</span></a><ul><li class="level-2"><a class="final" href="/gallery/template-gallery/"><span>Browse</span></a></li><li class="level-2"><a class="final" href="/community/submit-template/"><span>Submit your Engine as a Template</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Demo Tutorials</span></a><ul><li class="level-2"><a class="final" href="/demo/tapster/"><span>Comics Recommendation Demo</span></a></li><li class="level-2"><a class="final" href="/demo/community/"><span>Community Contributed Demo</span></a></li><li class="level-2"><a class="final" href="/demo/textclassification/"><span>Text Classification Engine Tutorial</span></a></li></ul></li><li class="level-1"><a class="expandible" href="/community/"><span>Getting Involved</span></a><ul><li class="level-2"><a class="final" href="/community/contribute-code/"><span>Contribute Code</span></a></li><li class="level-2"><a class="final" href="/community/contribute-documentation/"><span>Contribute Documentation</span></a></li><li class="level-2"><a class="final" href="/community/contribute-sdk/"><span>Contribute a SDK</span></a></li><li class="level-2"><a class="final" href="/community/contribute-webhook/"><span>Contribute a Webhook</span></a></li><li class="level-2"><a class="final" href="/community/projects/"><span>Community Projects</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Getting Help</span></a><ul><li class="level-2"><a class="final active" href="/resources/faq/"><span>FAQs</span></a></li><li class="level-2"><a class="final" href="/support/"><span>Support</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Resources</span></a><ul><li class="level-2"><a class="final" href="/cli/"><span>Command-line Interface</span></a></li><li class="level-2"><a class="final" href="/resources/release/"><span>Release Cadence</span></a></li><li class="level-2"><a class="final" href="/resources/intellij/"><span>Developing Engines with IntelliJ IDEA</span></a></li><li class="level-2"><a class="final" href="/resources/upgrade/"><span>Upgrade Instructions</span></a></li><li class="level-2"><a class="final" href="/resources/glossary/"><span>Glossary</span></a></li></ul></li><li class="level-1"><a class="expandible" href="#"><span>Apache Software Foundation</span></a><ul><li class="level-2"><a class="final" href="https://www.apache.org/"><span>Apache Homepage</span></a></li><li class="level-2"><a class="final" href="https://www.apache.org/licenses/"><span>License</span></a></li><li class="level-2"><a class="final" href="https://www.apache.org/foundation/sponsorship.html"><span>Sponsorship</span></a></li><li class="level-2"><a class="final" href="https://www.apache.org/foundation/thanks.html"><span>Thanks</span></a></li><li class="level-2"><a class="final" href="https://www.apache.org/security/"><span>Security</span></a></li></ul></li></ul></nav></div><div class="col-md-9 col-sm-12"><div class="content-header hidden-md hidden-lg"><div id="breadcrumbs" class="hidden-sm hidden xs"><ul><li><a href="#">Getting Help</a><span class="spacer">&gt;</span></li><li><span class="last">FAQs</span></li></ul></div><div id="page-title"><h1>Frequently Asked Questions</h1></div></div><div id="table-of-content-wrapper"><h5>On this page</h5><aside id="table-of-contents"><ul> <li> <a href="#using-predictionio">Using PredictionIO</a> </li> <li> <a href="#problem-with-event-server">Problem with Event Server</a> </li> <li> <a href="#engine-training">Engine Training</a> </li> <li> <a href="#deploy-engine">Deploy Engine</a> </li> <li> <a href="#building-predictionio">Building PredictionIO</a> </li> <li> <a href="#engine-development">Engine Development</a> </li> <li> <a href="#running-hbase">Running HBase</a> </li> </ul> </aside><hr/><a id="edit-page-link" href="https://github.com/apache/predictionio/tree/livedoc/docs/manual/source/resources/faq.html.md"><img src="/images/icons/edit-pencil-d6c1bb3d.png"/>Edit this page</a></div><div class="content-header hidden-sm hidden-xs"><div id="breadcrumbs" class="hidden-sm hidden xs"><ul><li><a href="#">Getting Help</a><span class="spacer">&gt;</span></li><li><span class="last">FAQs</span></li></ul></div><div id="page-title"><h1>Frequently Asked Questions</h1></div></div><div class="content"> <p>If you have questions that are not resolved below, you can subscribe and post to the user mailing list. You can follow the instructions <a href="/support">here</a>.</p><h2 id='using-predictionio' class='header-anchors'>Using PredictionIO</h2><h3 id='q:-how-do-i-check-to-see-if-various-dependencies,-such-as-elasticsearch-and-hbase,-are-running?' class='header-anchors'>Q: How do I check to see if various dependencies, such as Elasticsearch and HBase, are running?</h3><p>You can run <code>$ pio status</code> from the terminal and it will return the status of various components that PredictionIO depends on.</p> <ul> <li> You should see the following message if everything is OK:</li> </ul> <div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="gp">$ </span>pio status
PredictionIO
  Installed at: /home/vagrant/PredictionIO
  Version: 0.8.6

Apache Spark
  Installed at: /home/vagrant/PredictionIO/vendors/spark-1.2.0
  Version: 1.2.0 <span class="o">(</span>meets minimum requirement of 1.2.0<span class="o">)</span>

Storage Backend Connections
  Verifying Meta Data Backend
  Verifying Model Data Backend
  Verifying Event Data Backend
  Test write Event Store <span class="o">(</span>App Id 0<span class="o">)</span>
2015-02-03 18:52:38,904 INFO  hbase.HBLEvents - The table predictionio_eventdata:events_0 doesn<span class="s1">'t exist yet. Creating now...
2015-02-03 18:52:39,868 INFO  hbase.HBLEvents - Removing table predictionio_eventdata:events_0...

(sleeping 5 seconds for all messages to show up...)
Your system is all ready to go.
</span></pre></td></tr></tbody></table> </div> <ul> <li>If you see the following error message, it usually means Elasticsearch is not running properly:</li> </ul> <div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre>  ...
Storage Backend Connections
  Verifying Meta Data Backend
  ...
Caused by: org.elasticsearch.client.transport.NoNodeAvailableException: None of the configured nodes are available: <span class="o">[]</span>
    at org.elasticsearch.client.transport.TransportClientNodesService.ensureNodesAreAvailable<span class="o">(</span>TransportClientNodesService.java:298<span class="o">)</span>
  ...

Unable to connect to all storage backend<span class="o">(</span>s<span class="o">)</span> successfully. Please refer to error message<span class="o">(</span>s<span class="o">)</span> above. Aborting.
</pre></td></tr></tbody></table> </div> <p>You can check if there is any Elasticsearch process by running &#39;jps&#39;.</p><p>Please see <strong>How to start Elasticsearch</strong> below.</p> <ul> <li>If you see the following error message, it usually means HBase is not running properly:</li> </ul> <div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15</pre></td><td class="code"><pre>Storage Backend Connections
  Verifying Meta Data Backend
  Verifying Model Data Backend
  Verifying Event Data Backend
2015-02-03 18:40:04,810 ERROR zookeeper.RecoverableZooKeeper - ZooKeeper exists failed after 1 attempts
2015-02-03 18:40:04,812 ERROR zookeeper.ZooKeeperWatcher - hconnection-0x1e4075ce, <span class="nv">quorum</span><span class="o">=</span>localhost:2181, <span class="nv">baseZNode</span><span class="o">=</span>/hbase Received unexpected KeeperException, re-throwing exception
org.apache.zookeeper.KeeperException<span class="nv">$ConnectionLossException</span>: KeeperErrorCode <span class="o">=</span> ConnectionLoss <span class="k">for</span> /hbase/hbaseid
...
2015-02-03 18:40:07,021 ERROR hbase.StorageClient - Failed to connect to HBase. Plase check <span class="k">if </span>HBase is running properly.
2015-02-03 18:40:07,026 ERROR storage.Storage<span class="nv">$ </span>- Error initializing storage client <span class="k">for </span><span class="nb">source </span>HBASE
2015-02-03 18:40:07,027 ERROR storage.Storage<span class="nv">$ </span>- Can<span class="s1">'t connect to ZooKeeper
java.util.NoSuchElementException: None.get
...

Unable to connect to all storage backend(s) successfully. Please refer to error message(s) above. Aborting.
</span></pre></td></tr></tbody></table> </div> <p>You can check if there is any HBase-related process by running &#39;jps&#39;.</p><p>Please see <strong>How to start HBase</strong> below.</p><h3 id='q:-how-to-start-elasticsearch?' class='header-anchors'>Q: How to start Elasticsearch?</h3><p>If you followed the <a href="/install/install-sourcecode/">instructions</a> to install PredictionIO, Elasticsearch would have been installed at <code>PredictionIO/vendors/elasticsearch-x.y.z/</code> where x.y.z is the version number. To start it, run:</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>~/PredictionIO/vendors/elasticsearch-x.y.z/bin/elasticsearch
</pre></td></tr></tbody></table> </div> <p>If you didn&#39;t use install script, please go to where Elasticsearch is installed to start it.</p><div class="alert-message info"><p>It may take some time (15 seconds or so) for Elasticsearch to become ready after you start it (wait a bit before you run <code>pio status</code> again).</p></div><h3 id='q:-how-to-start-hbase-?' class='header-anchors'>Q: How to start HBase ?</h3><p>If you followed the <a href="/install/install-sourcecode/">instructions</a> to install PredictionIO, the HBase is installed at <code>~/PredictionIO/vendors/hbase-x.y.z/</code> where x.y.z is the version number. To start it, run:</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>~/PredictionIO/vendors/hbase-x.y.z/bin/start-hbase.sh
</pre></td></tr></tbody></table> </div> <p>If you didn&#39;t use install script, please go to where HBase is installed to start it.</p><div class="alert-message info"><p>It may take some time (15 seconds or so) for HBase to become ready after you start it (wait a bit before you run <code>pio status</code> again).</p></div><h2 id='problem-with-event-server' class='header-anchors'>Problem with Event Server</h2><h3 id='q:-how-do-i-increase-the-jvm-heap-size-of-the-event-server?' class='header-anchors'>Q: How do I increase the JVM heap size of the Event Server?</h3><p>Add the <code>JAVA_OPTS</code> environmental variable to supply JVM options, e.g.</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span><span class="nv">JAVA_OPTS</span><span class="o">=</span>-Xmx16g bin/pio eventserver ...
</pre></td></tr></tbody></table> </div> <h2 id='engine-training' class='header-anchors'>Engine Training</h2><h3 id='q:-how-to-increase-spark-driver-program-and-worker-executor-memory-size?' class='header-anchors'>Q: How to increase Spark driver program and worker executor memory size?</h3><p>In general, the PredictionIO <code>bin/pio</code> scripts wraps around Spark&#39;s <code>spark-submit</code> script. You can specify a lot of Spark configurations (i.e. executor memory, cores, master url, etc.) with it. You can supply these as pass-through arguments at the end of <code>bin/pio</code> command.</p><p>If the engine training seems stuck, it&#39;s possible that the the executor doesn&#39;t have enough memory.</p><p>First, follow <a href="http://spark.apache.org/docs/latest/spark-standalone.html">instruction here</a> to start standalone Spark cluster and get the master URL. If you use the provided quick install script to install PredictionIO, the Spark is installed at <code>PredictionIO/vendors/spark-1.2.0/</code> where you could run the Spark commands in <code>sbin/</code> as described in the Spark documentation. Then use following train command to specify executor memory (default is only 512 MB) and driver memory.</p><p>For example, the follow command set the Spark master to <code>spark://localhost:7077</code> (the default url of standalone cluster), set the driver memory to 16G and set the executor memory to 24G for <code>pio train</code>.</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>pio train -- --master spark://localhost:7077 --driver-memory 16G --executor-memory 24G
</pre></td></tr></tbody></table> </div> <h3 id='q:-how-to-resolve-&quot;exception-in-thread-&quot;main&quot;-org.apache.spark.sparkexception:-job-aborted-due-to-stage-failure:-serialized-task-165:35-was-110539813-bytes,-which-exceeds-max-allowed:-spark.akka.framesize-(10485760-bytes)---reserved-(204800-bytes).-consider-increasing-spark.akka.framesize-or-using-broadcast-variables-for-large-values.&quot;?' class='header-anchors'>Q: How to resolve &quot;Exception in thread &quot;main&quot; org.apache.spark.SparkException: Job aborted due to stage failure: Serialized task 165:35 was 110539813 bytes, which exceeds max allowed: spark.akka.frameSize (10485760 bytes) - reserved (204800 bytes). Consider increasing spark.akka.frameSize or using broadcast variables for large values.&quot;?</h3><p>A likely reason is the local algorithm model is larger than the default frame size. You can specify a larger value as a pass-thru argument to spark-submit when you <code>pio train</code>. The following command increase the frameSize to 1024MB.</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>pio train -- --conf spark.akka.frameSize<span class="o">=</span>1024
</pre></td></tr></tbody></table> </div> <h2 id='deploy-engine' class='header-anchors'>Deploy Engine</h2><h3 id='q:-how-to-increase-heap-space-memory-for-&quot;pio-deploy&quot;?' class='header-anchors'>Q: How to increase heap space memory for &quot;pio deploy&quot;?</h3><p>If you see the following error during <code>pio deploy</code>, it means there is not enough heap space memory.</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>...
<span class="o">[</span>ERROR] <span class="o">[</span>LocalFSModels] Java heap space
<span class="o">[</span>ERROR] <span class="o">[</span>OneForOneStrategy] None.get
...
</pre></td></tr></tbody></table> </div> <p>To increase the heap space, specify the &quot;-- --driver-memory &quot; parameter in the command. For example, set the driver memory to 8G when deploy the engine:</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>pio deploy -- --driver-memory 8G
</pre></td></tr></tbody></table> </div> <h2 id='building-predictionio' class='header-anchors'>Building PredictionIO</h2><h3 id='q:-how-to-resolve-&quot;error:-could-not-find-or-load-main-class-org.apache.predictionio.tools.console&quot;-after-./make_distribution.sh?' class='header-anchors'>Q: How to resolve &quot;Error: Could not find or load main class org.apache.predictionio.tools.Console&quot; after ./make_distribution.sh?</h3><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="gp">$ </span>bin/pio app
Error: Could not find or load main class org.apache.predictionio.tools.Console
</pre></td></tr></tbody></table> </div> <p>When PredictionIO bumps a version, it creates another JAR file with the new version number.</p><p>Delete everything but the latest <code>pio-assembly-&lt;VERSION&gt;.jar</code> in <code>$PIO_HOME/assembly</code> directory. For example:</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="gp">PredictionIO$ </span><span class="nb">cd </span>assembly/
<span class="gp">PredictionIO/assembly$ </span>ls -al
total 197776
drwxr-xr-x  2 yipjustin yipjustin      4096 Nov 12 00:08 .
drwxr-xr-x 17 yipjustin yipjustin      4096 Nov 12 00:09 ..
-rw-r--r--  1 yipjustin yipjustin 101184982 Nov  5 06:05 pio-assembly-0.8.1-SNAPSHOT.jar
-rw-r--r--  1 yipjustin yipjustin 101324859 Nov 12 00:09 pio-assembly-0.8.2.jar

<span class="gp">PredictionIO/assembly$ </span>rm pio-assembly-0.8.1-SNAPSHOT.jar
</pre></td></tr></tbody></table> </div> <h3 id='q:-how-to-resolve-&quot;.......[error]-(data/compile:compile)-java.lang.assertionerror:-assertion-failed:-java.lang.autocloseable&quot;-when-./make_distribution.sh?' class='header-anchors'>Q: How to resolve &quot;.......[error] (data/compile:compile) java.lang.AssertionError: assertion failed: java.lang.AutoCloseable&quot; when ./make_distribution.sh?</h3><p>PredictionIO only support Java 8 or later. Please make sure you have the correct Java version with the command:</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="gp">$ </span>javac -version
</pre></td></tr></tbody></table> </div> <h2 id='engine-development' class='header-anchors'>Engine Development</h2><h3 id='q:-what&#39;s-the-difference-between-p--and-l--prefixed-classes-and-functions?' class='header-anchors'>Q: What&#39;s the difference between P- and L- prefixed classes and functions?</h3><p>PredictionIO v0.8 is built on the top of Spark, a massively scalable programming framework. A spark algorithm is different from conventional single machine algorithm in a way that spark algorithms use the <a href="http://spark.apache.org/docs/1.0.1/programming-guide.html#resilient-distributed-datasets-rdds">RDD</a> abstraction as its primary data type.</p><p>PredictionIO framework natively support both RDD-based algorithms and traditional single-machine algorithms. For controllers prefixed by &quot;P&quot; (i.e. PJavaDataSource, PJavaAlgorithm), their data include RDD abstraction; For &quot;L&quot; controllers, they are traditional single machine algorithms.</p><h2 id='running-hbase' class='header-anchors'>Running HBase</h2><h3 id='q:-how-to-resolve-&#39;exception-in-thread-&quot;main&quot;-java.lang.nullpointerexception-at-org.apache.hadoop.net.dns.reversedns(dns.java:92)&#39;?' class='header-anchors'>Q: How to resolve &#39;Exception in thread &quot;main&quot; java.lang.NullPointerException at org.apache.hadoop.net.DNS.reverseDns(DNS.java:92)&#39;?</h3><p>HBase relies on reverse DNS be set up properly to function. If your network configuration changes (such as working on a laptop with public WiFi hotspots), there could be a chance that reverse DNS does not function properly. You can install a DNS server on your own computer. Some users have reported that using <a href="https://developers.google.com/speed/public-dns/">Google Public DNS</a> would also solve the problem.</p><h3 id='q:-how-to-fix-hbase-issues-after-cleaning-up-a-disk-that-was-full?' class='header-anchors'>Q: How to fix HBase issues after cleaning up a disk that was full?</h3><p>You may receive error messages like <code>write error: No space left on device</code> when disk is full, and also receive error from <code>pio status</code> even after restarting PredictionIO services (due to <a href="https://issues.apache.org/jira/browse/ZOOKEEPER-1621">an issue</a> in ZooKeeper).</p><p>One quick fix is to delete the newest <code>snapshot.xxxxx</code> and <code>log.xxxoo</code> in the ZooKeeper data directory (e.g. <code>$HBASE_HOME/zookeeper/zookeeper_0/version-2</code>). Restart all services with <code>pio-start-all</code>, and use <code>pio status</code> to check whether your setup is good to go again.</p><p>If you still have problems connecting to the event server, take a look at the HBase dashboard to see if there are <code>regions under transition</code>. If so, try the following:</p> <ol> <li><p> Try <code>hbase hbck -repair</code> and <code>hbase hbck -repairHoles</code>. If it solves the problem, you are all set. Otherwise, continue on.</p></li> <li><p> Find out failing regions by <code>hbase hbck</code>.</p><div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>...
Summary:
Table pio_event:events_1 is inconsistent.
  Number of regions: 2
  Deployed on:  prediction.io,54829,1489213832255
...
2 inconsistencies detected.
</pre></td></tr></tbody></table> </div></li> <li><p> Shutdown HBase process and delete <code>recovered.edits</code> folders in the HBase data directory (e.g. <code>$HBASE_HOME/hbase/data/pio_event/events_1</code> in this example) for failing regions.</p></li> <li><p> Run <code>hbase hbck -repairHoles</code> and restart all PredictionIO services.</p></li> </ol> </div></div></div></div><footer><div class="container"><div class="seperator"></div><div class="row"><div class="col-md-6 footer-link-column"><div class="footer-link-column-row"><h4>Community</h4><ul><li><a href="//predictionio.apache.org/install/" target="blank">Download</a></li><li><a href="//predictionio.apache.org/" target="blank">Docs</a></li><li><a href="//github.com/apache/predictionio" target="blank">GitHub</a></li><li><a href="mailto:user-subscribe@predictionio.apache.org" target="blank">Subscribe to User Mailing List</a></li><li><a href="//stackoverflow.com/questions/tagged/predictionio" target="blank">Stackoverflow</a></li></ul></div></div><div class="col-md-6 footer-link-column"><div class="footer-link-column-row"><h4>Contribute</h4><ul><li><a href="//predictionio.apache.org/community/contribute-code/" target="blank">Contribute</a></li><li><a href="//github.com/apache/predictionio" target="blank">Source Code</a></li><li><a href="//issues.apache.org/jira/browse/PIO" target="blank">Bug Tracker</a></li><li><a href="mailto:dev-subscribe@predictionio.apache.org" target="blank">Subscribe to Development Mailing List</a></li></ul></div></div></div><div class="row"><div class="col-md-12 footer-link-column"><p>Apache PredictionIO, PredictionIO, Apache, the Apache feather logo, and the Apache PredictionIO project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</p><p>All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p></div></div></div><div id="footer-bottom"><div class="container"><div class="row"><div class="col-md-12"><div id="footer-logo-wrapper"><img alt="PredictionIO" src="/images/logos/logo-white-d1e9c6e6.png"/><span>速</span></div><div id="social-icons-wrapper"><a class="github-button" href="https://github.com/apache/predictionio" data-icon="octicon-star" data-show-count="true" aria-label="Star apache/predictionio on GitHub">Star</a> <a class="github-button" href="https://github.com/apache/predictionio/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork apache/predictionio on GitHub">Fork</a> <script id="github-bjs" async="" defer="" src="https://buttons.github.io/buttons.js"></script><a href="https://twitter.com/predictionio" target="blank"><img alt="PredictionIO on Twitter" src="/images/icons/twitter-ea9dc152.png"/></a> <a href="https://www.facebook.com/predictionio" target="blank"><img alt="PredictionIO on Facebook" src="/images/icons/facebook-5c57939c.png"/></a> </div></div></div></div></div></footer></div><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v1/st.js','_st');

_st('install','HaUfpXXV87xoB_zzCQ45');</script><script src="/javascripts/application-d943a254.js"></script></body></html>